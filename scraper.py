#!/usr/bin/env python

import scraperwiki
import requests
import lxml.html
import lxml.etree
import urllib2

#PASTE POSTCODE LIST HERE - COULD EVEN GRAB FROM API!
#ALREADY DONE
#'AB106BX','AB115BB','AB116HB','AB166JR','AB217LW','AB439AH','B147LG','B236SR','B276BH','B312NG','B47LS','B664BE','B707QG','B797LN','BA11TP','BA201JB','BB112EE','BB22BL','BD13HN','BH14BG','BH25RH','BL11NB','BL90BL','BN13XB','BN33YE','BN99PE','BS13LT','BS231JF','BS34EY','BT119BW','BT11DD','BT11HB','BT126HN','BT131FR','BT197HB','BT237HY','BT281AW','BT323EA','BT341AR','BT401JE','BT414DN','BT436AL','BT456PR','BT486PE','BT521DE','BT55LP','BT617BA','BT69DQ','BT781EH','CA142AD','CA287JS','CA38LP','CB21AW','CF243RR','CF311DN','CF374SU','CF401AT','CF634HE','CH13JJ','CH412YA','CH460PF','CH650AN','CH65AE','CM201JH','CM232JY','CO101RB','CO11LG','CR01LB','CR07AE','CR78LF','CT119AG','CT202BE','CT91JT','CV11HG','CV212AF','CW12EL','CW71BG','CW95BY','DA11DN','DD108JB','DD111HN','DD12AP','DD12DB','DD23BX','DD52AG','DD83AE','DE12AD','DE757AA','DG12BA','DH14SQ','DH14SQ','DH33AY','DH44AN','DH85SD','DH90HX','DL147EQ','DL166AB','DL54DS','DN11EW','DN145DA','DN156EN','DN311LH','DY102BH','DY11QQ','E106AJ','E111HH','E35EL','EH112PN','EH114SQ','EH127SD','EH142SW','EH151AH','EH192DA','EH217DE','EH221JB','EH268HN','EH38EA','EH42TX','EH481TJ','EH525AE','EH545DZ','EH546NB','EH65LA','EH89EW','EN55UE','EX46NS','FK101JL','FK11LL','FK38AS','FK82LP','FY11DU','G116BA','G131LS','G15EP','G209SH','G211DU','G23HQ','G26NL','G28HA','G311DL','G327XW','G349DT','G413YN','G428RW','G429JN','G459AA','G513JW','G661HN','G671NG','G720QD','G727HB','G732LS','G741LB','G781SN','G811BL','G821LE','G848TF','GL12NW','GL517SE','GL53DE','GU111EG','HD12EH','HD61AQ','HG11QH','HP11EG','HR40AB','HR40AB','HU12HU','HX11TQ','IP331DB','IV11EA','IV301DJ','KA106AA','KA11LT','KA128EH','KA71PQ','KA91JS','KT198DT','KY112QZ','KY11NB','KY127EB','KY75LH','KY84LZ','L11EE','L204SW','L252RG','L252RG','L345QA','L369UQ','L392EG','L43QA','LA11JF','LA141JH','LA45DH','LL297AA','LS123AA','LS132ET','LS158ET','LS213AL','LS278DX','LS28NG','LU12BU','LU61LA','M24JE','M300EA','M337XZ','M65JA','ME44BQ','MK22SW','MK401NE','ML117LU','ML11BN','ML27AU','ML37AU','ML41AJ','ML53AE','ML66AF','ML91DZ','N193JF','NE15PF','NE17RW','NE241BG','NE262TA','NE288JD','NE290BE','NE290BE','NE332LR','NE49QB','NE81ED','NG101LT','NG16DQ','NG171DG','NG181RU','NG241XP','NG316EE','NG92JH','NN114PN','NN168SY','NP223EJ','NP236HQ','NR13DE','NR301NU','NW25SH','OL161DB','OX165UH','PA11BE','PA145JQ','PA151SN','PA48QU','PA58AN','PE11PA','PE11PA','PE301DA','PH28NY','PL11NF','PO121DF','PO160EP','PO20BN','PO211RS','PO77ED','PO95AH','PR12EJ','PR252SB','PR71BN','RG121LL','RG217LZ','RH101BQ','RM108RE','RM13ED','S12GA','S401RR','S649AU','S651AL','S702QT','S801JA','SA113EN','SA151SH','SA15HQ','SA612AD','SE120DZ','SE128RG','SE172DJ','SE256EZ','SE265UA','SE279DJ','SK11PR','SK142QR','SM11PA','SM51AG','SN11LD','SO143HG','SO153HJ','SO509FH','SR11QD','SR46NQ','SR52JE','SR77HQ','SR81BP','SS141DD',
#PROBLEM 1: 'ST1',
#'ST13AN','ST148HF','ST162BA','ST32HT','ST51PS','SW111LN','SW179NG','SW99SJ','TA63TQ','TD11BA','TF34JL','TN248SF','TN341QY','TQ122AQ','TR148AH','TS101DL','TS15ET','TS181AA','TS232ND',
#PROBLEM 2: 'TS245RJ'
#this list is a result of running and stripping out bad ones
cleanpostcodes = ['AB106BX','AB115BB','AB116HB','AB166JR','AB217LW','AB439AH','B147LG','B236SR','B276BH','B312NG','B47LS','B664BE','B707QG','B797LN','BA11TP','BA201JB','BB112EE','BB22BL','BD13HN','BH14BG','BH25RH','BL11NB','BL90BL','BN13XB','BN33YE','BN99PE','BS13LT','BS231JF','BS34EY','BT119BW','BT11DD','BT11HB','BT126HN','BT131FR','BT197HB','BT237HY','BT281AW','BT323EA','BT341AR','BT401JE','BT414DN','BT436AL','BT456PR','BT486PE','BT521DE','BT55LP','BT617BA','BT69DQ','BT781EH','CA142AD','CA287JS','CA38LP','CB21AW','CF243RR','CF311DN','CF374SU','CF401AT','CF634HE','CH13JJ','CH412YA','CH460PF','CH650AN','CH65AE','CM201JH','CM232JY','CO101RB','CO11LG','CR01LB','CR07AE','CR78LF','CT119AG','CT202BE','CT91JT','CV11HG','CV212AF','CW12EL','CW71BG','CW95BY','DA11DN','DD108JB','DD111HN','DD12AP','DD12DB','DD23BX','DD52AG','DD83AE','DE12AD','DE757AA','DG12BA','DH14SQ','DH14SQ','DH33AY','DH44AN','DH85SD','DH90HX','DL147EQ','DL166AB','DL54DS','DN11EW','DN145DA','DN156EN','DN311LH','DY102BH','DY11QQ','E106AJ','E111HH','E35EL','EH112PN','EH114SQ','EH127SD','EH142SW','EH151AH','EH192DA','EH217DE','EH221JB','EH268HN','EH38EA','EH42TX','EH481TJ','EH525AE','EH545DZ','EH546NB','EH65LA','EH89EW','EN55UE','EX46NS','FK101JL','FK11LL','FK38AS','FK82LP','FY11DU','G116BA','G131LS','G15EP','G209SH','G211DU','G23HQ','G26NL','G28HA','G311DL','G327XW','G349DT','G413YN','G428RW','G429JN','G459AA','G513JW','G661HN','G671NG','G720QD','G727HB','G732LS','G741LB','G781SN','G811BL','G821LE','G848TF','GL12NW','GL517SE','GL53DE','GU111EG','HD12EH','HD61AQ','HG11QH','HP11EG','HR40AB','HR40AB','HU12HU','HX11TQ','IP331DB','IV11EA','IV301DJ','KA106AA','KA11LT','KA128EH','KA71PQ','KA91JS','KT198DT','KY112QZ','KY11NB','KY127EB','KY75LH','KY84LZ','L11EE','L204SW','L252RG','L252RG','L345QA','L369UQ','L392EG','L43QA','LA11JF','LA141JH','LA45DH','LL297AA','LS123AA','LS132ET','LS158ET','LS213AL','LS278DX','LS28NG','LU12BU','LU61LA','M24JE','M300EA','M337XZ','M65JA','ME44BQ','MK22SW','MK401NE','ML117LU','ML11BN','ML27AU','ML37AU','ML41AJ','ML53AE','ML66AF','ML91DZ','N193JF','NE15PF','NE17RW','NE241BG','NE262TA','NE288JD','NE290BE','NE290BE','NE332LR','NE49QB','NE81ED','NG101LT','NG16DQ','NG171DG','NG181RU','NG241XP','NG316EE','NG92JH','NN114PN','NN168SY','NP223EJ','NP236HQ','NR13DE','NR301NU','NW25SH','OL161DB','OX165UH','PA11BE','PA145JQ','PA151SN','PA48QU','PA58AN','PE11PA','PE11PA','PE301DA','PH28NY','PL11NF','PO121DF','PO160EP','PO20BN','PO211RS','PO77ED','PO95AH','PR12EJ','PR252SB','PR71BN','RG121LL','RG217LZ','RH101BQ','RM108RE','RM13ED','S12GA','S401RR','S649AU','S651AL','S702QT','S801JA','SA113EN','SA151SH','SA15HQ','SA612AD','SE120DZ','SE128RG','SE172DJ','SE256EZ','SE265UA','SE279DJ','SK11PR','SK142QR','SM11PA','SM51AG','SN11LD','SO143HG','SO153HJ','SO509FH','SR11QD','SR46NQ','SR52JE','SR77HQ','SR81BP','SS141DD','ST13AN','ST148HF','ST162BA','ST32HT','ST51PS','SW111LN','SW179NG','SW99SJ','TA63TQ','TD11BA','TF34JL','TN248SF','TN341QY','TQ122AQ','TR148AH','TS101DL','TS15ET','TS181AA','TS232ND','TW136AP','UB81LH','WA101BQ','WA12QQ','WA72BS','WA86JW','WF101BA','WF11UT','WF131QH','WF58BJ','WF81LP','WN11UW','WN86HB','WR13LR','WS111EB','WS11HP','WS32JH','WV111SZ','WV131TQ','WV13NX','YO111BA','YO152SA','YO19QU','YO211BL','YO243BW','YO84ET']
#this list is the last list of postcodes after the last time the scraper fell over. 
#The latlongs for the rest are stored in a list further below.
postcodes = ['TW136AP','UB81LH','WA101BQ','WA12QQ','WA72BS','WA86JW','WF101BA','WF11UT','WF131QH','WF58BJ','WF81LP','WN11UW','WN86HB','WR13LR','WS111EB','WS11HP','WS32JH','WV111SZ','WV131TQ','WV13NX','YO111BA','YO152SA','YO19QU','YO211BL','YO243BW','YO84ET']
latlonglist = []

def compilepostcodes(postcodes):
    latlonglist = ['57.141438,-2.113270', '57.147923,-2.092598', '57.144653,-2.103844', '57.155281,-2.161993', '57.204777,-2.176246', '57.692745,-2.005271', '52.434013,-1.893171', '52.522324,-1.843289', '52.446560,-1.822709', '52.415962,-1.971021', '52.480663,-1.894251', '52.476395,-1.969509', '52.518200,-1.993915', '52.632900,-1.693767', '51.378155,-2.360039', '50.941357,-2.628417', '53.788525,-2.240799', '53.745510,-2.482068', '53.796146,-1.754985', '50.726093,-1.840719', '50.720463,-1.883023', '53.577026,-2.429750', '53.591972,-2.296454', '50.826878,-0.142259', '50.829411,-0.173825', '50.794640,0.049260', '51.458881,-2.590781', '51.346867,-2.978221', '51.441814,-2.598100', '54.573483,-5.990221', '54.600620,-5.934270', '54.599014,-5.931782', '54.589233,-5.962200', '54.604313,-5.951262', '54.647484,-5.656499', '54.593025,-5.695436', '54.511765,-6.051006', '54.347889,-6.271171', '54.174702,-6.338471', '54.851418,-5.817525', '54.715282,-6.218897', '54.866760,-6.274530', '54.754044,-6.612371', '54.995598,-7.320923', '55.130924,-6.671666', '54.595829,-5.889514', '54.349236,-6.653732', '54.587490,-5.900202', '54.600349,-7.299855', '54.643845,-3.547837', '54.548569,-3.589729', '54.892746,-2.933693', '52.200184,0.126745', '51.493504,-3.167509', '51.506229,-3.578651', '51.602493,-3.340023', '51.620941,-3.452880', '51.405304,-3.269121', '53.192287,-2.888664', '53.390301,-3.024372', '53.400787,-3.112989', '53.278179,-2.901768', '53.249184,-3.135143', '51.770031,0.094925', '51.871258,0.159622', '52.040131,0.730546', '51.888821,0.902909', '51.374317,-0.097726', '51.382107,-0.068561', '51.398708,-0.095105', '51.334175,1.418641', '51.078197,1.176758', '51.386143,1.381702', '52.409504,-1.510189', '52.374382,-1.263094', '53.097652,-2.440920', '53.191296,-2.527820', '53.260845,-2.515154', '51.445133,0.219039', '56.710979,-2.468719', '56.559422,-2.581901', '56.461918,-2.969899', '56.463898,-2.969430', '56.472176,-3.009461', '56.467304,-2.874633', '56.644714,-2.888944', '52.919540,-1.474636', '53.013779,-1.353073', '55.069565,-3.611482', '54.777176,-1.580656', '54.777176,-1.580656', '54.854248,-1.573300', '54.843121,-1.470410', '54.852940,-1.833235', '54.870537,-1.698081', '54.662628,-1.675626', '54.699711,-1.601409', '54.619839,-1.572797', '53.523613,-1.133435', '53.703796,-0.872789', '53.591415,-0.651025', '53.565071,-0.085264', '52.388702,-2.246737', '52.509720,-2.084442', '51.576485,-0.011724', '51.569496,0.012113', '51.533184,-0.029775', '55.937531,-3.234343', '55.924068,-3.276820', '55.942577,-3.282153', '55.915386,-3.284855', '55.953415,-3.114701', '55.875481,-3.106137', '55.942451,-3.052825', '55.893719,-3.072068', '55.827412,-3.221785', '55.946308,-3.213486', '55.967190,-3.245974', '55.901123,-3.642662', '55.934105,-3.470302', '55.897377,-3.495861', '55.884617,-3.510478', '55.971031,-3.172280', '55.944939,-3.183565', '51.651028,-0.196837', '50.727440,-3.523957', '56.115589,-3.790919', '56.000889,-3.784085', '56.019279,-3.723083', '56.115925,-3.937612', '53.818317,-3.053165', '55.870632,-4.307684', '55.889328,-4.323827', '55.857273,-4.245723', '55.887260,-4.286507', '55.882717,-4.229956', '55.865326,-4.263913', '55.860859,-4.259961', '55.859303,-4.258177', '55.858643,-4.217902', '55.851665,-4.172610', '55.868515,-4.122260', '55.829296,-4.281938', '55.835979,-4.264586', '55.826881,-4.266532', '55.806690,-4.235085', '55.862556,-4.312735', '55.940327,-4.158373', '55.948219,-3.988851', '55.792427,-4.088321', '55.819206,-4.167400', '55.827850,-4.211965', '55.760567,-4.175844', '55.801571,-4.387273', '55.901814,-4.406068', '55.943630,-4.572583', '56.003902,-4.734245', '51.865875,-2.247203', '51.902618,-2.115155', '51.745598,-2.217693', '51.249298,-0.766990', '53.646599,-1.783959', '53.702282,-1.781387', '53.994171,-1.539092', '51.750828,-0.473193', '52.056355,-2.718942', '52.056355,-2.718942', '53.743244,-0.334782', '53.722813,-1.861009', '52.245346,0.712822', '57.477951,-4.225414', '57.648300,-3.319299', '55.544334,-4.663251', '55.610138,-4.495542', '55.612911,-4.671410', '55.463482,-4.629443', '55.499435,-4.610573', '51.332901,-0.268231', '56.040436,-3.423363', '56.108746,-3.159532', '56.071758,-3.461001', '56.195972,-3.170221', '56.194145,-2.998375', '53.406612,-2.984209', '53.450924,-2.992220', '53.391083,-2.858832', '53.391083,-2.858832', '53.429161,-2.804559', '53.411270,-2.838944', '53.568111,-2.885669', '53.439293,-2.971295', '54.048325,-2.801310', '54.112877,-3.224930', '54.071877,-2.865658', '53.295368,-3.728858', '53.796745,-1.591539', '53.811771,-1.626383', '53.806286,-1.450788', '53.905804,-1.692898', '53.746159,-1.601552', '53.801708,-1.544073', '51.879543,-0.416157', '51.886917,-0.521769', '53.480869,-2.244641', '53.483818,-2.336537', '53.424541,-2.322344', '53.488911,-2.286706', '51.381691,0.527331', '51.994827,-0.727829', '52.137672,-0.466387', '55.673740,-3.779403', '55.791286,-3.993493', '55.775093,-3.922494', '55.775375,-4.034981', '55.819073,-4.022768', '55.862289,-4.027284', '55.866528,-3.980725', '55.740307,-3.973974', '51.564430,-0.130764', '54.971729,-1.617373', '54.976398,-1.616064', '55.127369,-1.511570', '55.042145,-1.443032', '54.990608,-1.536706', '55.008865,-1.447981', '55.008865,-1.447981', '54.998428,-1.431257', '54.976185,-1.656248', '54.962021,-1.602098', '52.898815,-1.271105', '52.952381,-1.152038', '53.124638,-1.261419', '53.146088,-1.199242', '53.075333,-0.811587', '52.909828,-0.642732', '52.925861,-1.215553', '52.256939,-1.162942', '52.399727,-0.728534', '51.774944,-3.245275', '51.778576,-3.207397', '52.628838,1.295019', '52.608669,1.727298', '51.548405,-0.222532', '53.619015,-2.156534', '52.062767,-1.334981', '55.846294,-4.425048', '55.934277,-4.689735', '55.949448,-4.762474', '55.878323,-4.387474', '55.836838,-4.511857', '52.572887,-0.244858', '52.572887,-0.244858', '52.753006,0.395423', '56.395145,-3.433479', '50.372566,-4.145067', '50.795471,-1.121078', '50.852375,-1.181337', '50.816612,-1.080012', '50.783154,-0.673281', '50.880054,-1.032325', '50.867355,-0.985195', '53.759789,-2.701079', '53.695019,-2.695307', '53.652767,-2.631338', '51.416779,-0.749331', '51.262325,-1.087297', '51.114414,-0.190073', '51.540852,0.148759', '51.578144,0.181318', '53.382946,-1.467689', '53.236004,-1.426394', '53.493813,-1.291273', '53.432961,-1.354750', '53.552704,-1.481909', '53.303101,-1.124909', '51.663704,-3.803774', '51.681873,-4.159443', '51.620785,-3.945102', '51.802994,-4.969353', '51.430180,0.021552', '51.455608,0.011793', '51.488293,-0.093937', '51.399258,-0.075286', '51.426216,-0.050174', '51.435940,-0.104016', '53.410919,-2.159469', '53.451298,-2.078594', '51.367332,-0.194499', '51.383106,-0.188489', '51.561241,-1.786411', '50.901978,-1.401890', '50.917458,-1.427625', '50.969975,-1.352353', '54.906376,-1.380838', '54.908554,-1.414104', '54.920113,-1.401331', '54.836830,-1.333731', '54.759892,-1.334715', '51.569530,0.458208', '53.025047,-2.172919', '52.898079,-1.864698', '52.807312,-2.118515', '52.988499,-2.135606', '53.009705,-2.225050', '51.463654,-0.166701', '51.425713,-0.165487', '51.465569,-0.115702', '51.129154,-3.006311', '55.616844,-2.808362', '52.674999,-2.445435', '51.149025,0.872252', '50.856628,0.581873', '50.530968,-3.608216', '50.214363,-5.295860', '54.618713,-1.069092', '54.575405,-1.237942', '54.561962,-1.313274', '54.607506,-1.292552']
    for postcode in postcodes:
        url = 'http://uk-postcodes.com/postcode/'+postcode
        print 'Scraping:', url
        html = requests.get(url)
        root = lxml.html.fromstring(html.content)
        #<span class="latitude">53.411270</span></p>
    	#<span class="longitude">-2.838944</span></p>
        latitude = root.cssselect('span.latitude')[0].text
        longitude = root.cssselect('span.longitude')[0].text
        latlong = latitude+","+longitude
        latlonglist.append(latlong)
        print 'latlonglist', latlonglist
    return latlonglist

#latlonglist = compilepostcodes(postcodes)
#print latlonglist

record = {}
#alreadydone = '57.141438,-2.113270', '57.147923,-2.092598', '57.144653,-2.103844', '57.155281,-2.161993', '57.204777,-2.176246', '57.692745,-2.005271', '52.434013,-1.893171', '52.522324,-1.843289', '52.446560,-1.822709', '52.415962,-1.971021', '52.480663,-1.894251', '52.476395,-1.969509', '52.518200,-1.993915', '52.632900,-1.693767', '51.378155,-2.360039', '50.941357,-2.628417', '53.788525,-2.240799', '53.745510,-2.482068', '53.796146,-1.754985', '50.726093,-1.840719', '50.720463,-1.883023', '53.577026,-2.429750', '53.591972,-2.296454', '50.826878,-0.142259', '50.829411,-0.173825', '50.794640,0.049260', '51.458881,-2.590781', '51.346867,-2.978221', '51.441814,-2.598100', '54.573483,-5.990221', '54.600620,-5.934270', '54.599014,-5.931782', '54.589233,-5.962200', '54.604313,-5.951262', '54.647484,-5.656499', '54.593025,-5.695436', '54.511765,-6.051006', '54.347889,-6.271171', '54.174702,-6.338471', '54.851418,-5.817525', '54.715282,-6.218897', '54.866760,-6.274530', '54.754044,-6.612371', '54.995598,-7.320923', '55.130924,-6.671666', '54.595829,-5.889514', '54.349236,-6.653732', '54.587490,-5.900202', '54.600349,-7.299855', '54.643845,-3.547837', '54.548569,-3.589729', '54.892746,-2.933693', '52.200184,0.126745', '51.493504,-3.167509', '51.506229,-3.578651', '51.602493,-3.340023', '51.620941,-3.452880', '51.405304,-3.269121', '53.192287,-2.888664', '53.390301,-3.024372', '53.400787,-3.112989', '53.278179,-2.901768', '53.249184,-3.135143', '51.770031,0.094925', '51.871258,0.159622', '52.040131,0.730546', '51.888821,0.902909', '51.374317,-0.097726', '51.382107,-0.068561', '51.398708,-0.095105', '51.334175,1.418641', '51.078197,1.176758', '51.386143,1.381702', '52.409504,-1.510189', '52.374382,-1.263094', '53.097652,-2.440920', '53.191296,-2.527820', '53.260845,-2.515154', '51.445133,0.219039', '56.710979,-2.468719', '56.559422,-2.581901', '56.461918,-2.969899', '56.463898,-2.969430', '56.472176,-3.009461', '56.467304,-2.874633', '56.644714,-2.888944', '52.919540,-1.474636', '53.013779,-1.353073', '55.069565,-3.611482', '54.777176,-1.580656', '54.777176,-1.580656', '54.854248,-1.573300', '54.843121,-1.470410', '54.852940,-1.833235', '54.870537,-1.698081', '54.662628,-1.675626', '54.699711,-1.601409', '54.619839,-1.572797', '53.523613,-1.133435', '53.703796,-0.872789', '53.591415,-0.651025', '53.565071,-0.085264', '52.388702,-2.246737', '52.509720,-2.084442', '51.576485,-0.011724', '51.569496,0.012113', '51.533184,-0.029775', '55.937531,-3.234343', '55.924068,-3.276820', '55.942577,-3.282153', '55.915386,-3.284855', '55.953415,-3.114701', '55.875481,-3.106137', '55.942451,-3.052825', '55.893719,-3.072068', '55.827412,-3.221785', '55.946308,-3.213486', '55.967190,-3.245974', '55.901123,-3.642662', '55.934105,-3.470302', '55.897377,-3.495861', '55.884617,-3.510478', '55.971031,-3.172280', '55.944939,-3.183565', '51.651028,-0.196837', '50.727440,-3.523957', '56.115589,-3.790919', '56.000889,-3.784085', '56.019279,-3.723083', '56.115925,-3.937612', '53.818317,-3.053165', '55.870632,-4.307684', '55.889328,-4.323827', '55.857273,-4.245723', '55.887260,-4.286507', '55.882717,-4.229956', '55.865326,-4.263913', '55.860859,-4.259961', '55.859303,-4.258177', '55.858643,-4.217902', '55.851665,-4.172610', '55.868515,-4.122260', '55.829296,-4.281938', '55.835979,-4.264586', '55.826881,-4.266532', '55.806690,-4.235085', '55.862556,-4.312735', '55.940327,-4.158373', '55.948219,-3.988851', '55.792427,-4.088321', '55.819206,-4.167400', '55.827850,-4.211965', '55.760567,-4.175844', '55.801571,-4.387273', '55.901814,-4.406068', '55.943630,-4.572583', '56.003902,-4.734245', '51.865875,-2.247203', '51.902618,-2.115155', '51.745598,-2.217693', '51.249298,-0.766990', '53.646599,-1.783959', '53.702282,-1.781387', '53.994171,-1.539092', '51.750828,-0.473193', '52.056355,-2.718942', '52.056355,-2.718942', '53.743244,-0.334782', '53.722813,-1.861009', '52.245346,0.712822', '57.477951,-4.225414', '57.648300,-3.319299', '55.544334,-4.663251', '55.610138,-4.495542', '55.612911,-4.671410', '55.463482,-4.629443', '55.499435,-4.610573', '51.332901,-0.268231', '56.040436,-3.423363', '56.108746,-3.159532', '56.071758,-3.461001', '56.195972,-3.170221', '56.194145,-2.998375', '53.406612,-2.984209', '53.450924,-2.992220', '53.391083,-2.858832', '53.391083,-2.858832', '53.429161,-2.804559', '53.411270,-2.838944', '53.568111,-2.885669', '53.439293,-2.971295', '54.048325,-2.801310', '54.112877,-3.224930', '54.071877,-2.865658', '53.295368,-3.728858', '53.796745,-1.591539', '53.811771,-1.626383', '53.806286,-1.450788', '53.905804,-1.692898', '53.746159,-1.601552', '53.801708,-1.544073', '51.879543,-0.416157', '51.886917,-0.521769', '53.480869,-2.244641', '53.483818,-2.336537', '53.424541,-2.322344', '53.488911,-2.286706', '51.381691,0.527331', '51.994827,-0.727829', '52.137672,-0.466387', '55.673740,-3.779403', '55.791286,-3.993493', '55.775093,-3.922494', '55.775375,-4.034981', '55.819073,-4.022768', '55.862289,-4.027284', '55.866528,-3.980725', '55.740307,-3.973974', '51.564430,-0.130764', '54.971729,-1.617373', '54.976398,-1.616064', '55.127369,-1.511570', '55.042145,-1.443032', '54.990608,-1.536706', '55.008865,-1.447981', '55.008865,-1.447981', '54.998428,-1.431257', '54.976185,-1.656248', '54.962021,-1.602098', '52.898815,-1.271105', '52.952381,-1.152038', '53.124638,-1.261419', '53.146088,-1.199242', '53.075333,-0.811587', '52.909828,-0.642732', '52.925861,-1.215553', '52.256939,-1.162942', '52.399727,-0.728534', '51.774944,-3.245275', '51.778576,-3.207397', '52.628838,1.295019', '52.608669,1.727298', '51.548405,-0.222532', '53.619015,-2.156534', '52.062767,-1.334981', '55.846294,-4.425048', '55.934277,-4.689735', '55.949448,-4.762474', '55.878323,-4.387474', '55.836838,-4.511857', '52.572887,-0.244858', '52.572887,-0.244858', '52.753006,0.395423', '56.395145,-3.433479', '50.372566,-4.145067', '50.795471,-1.121078', '50.852375,-1.181337', '50.816612,-1.080012', '50.783154,-0.673281', '50.880054,-1.032325', '50.867355,-0.985195', '53.759789,-2.701079', '53.695019,-2.695307', '53.652767,-2.631338', '51.416779,-0.749331', '51.262325,-1.087297', '51.114414,-0.190073', '51.540852,0.148759', '51.578144,0.181318', '53.382946,-1.467689', '53.236004,-1.426394', '53.493813,-1.291273', '53.432961,-1.354750', '53.552704,-1.481909', '53.303101,-1.124909', '51.663704,-3.803774', '51.681873,-4.159443', '51.620785,-3.945102', '51.802994,-4.969353', '51.430180,0.021552', '51.455608,0.011793', '51.488293,-0.093937', '51.399258,-0.075286', '51.426216,-0.050174', '51.435940,-0.104016', '53.410919,-2.159469', '53.451298,-2.078594', '51.367332,-0.194499', '51.383106,-0.188489', '51.561241,-1.786411', '50.901978,-1.401890', '50.917458,-1.427625', '50.969975,-1.352353', '54.906376,-1.380838', '54.908554,-1.414104', '54.920113,-1.401331', '54.836830,-1.333731', '54.759892,-1.334715', '51.569530,0.458208', '53.025047,-2.172919', '52.898079,-1.864698', '52.807312,-2.118515', '52.988499,-2.135606', '53.009705,-2.225050', '51.463654,-0.166701', '51.425713,-0.165487', '51.465569,-0.115702', '51.129154,-3.006311', '55.616844,-2.808362', '52.674999,-2.445435', '51.149025,0.872252', '50.856628,0.581873', '50.530968,-3.608216', '50.214363,-5.295860', '54.618713,-1.069092', '54.575405,-1.237942', '54.561962,-1.313274', '54.607506,-1.292552', '51.439949,-0.387510', '51.546040,-0.481168', '53.453442,-2.738653', '53.390900,-2.589893', '53.327705,-2.698477', '53.368519,-2.726678', '53.726528,-1.350963', '53.682335,-1.494431', '53.692261,-1.628381', '53.679691,-1.578244', 
latlonglist = ['53.690693,-1.312201', '53.548428,-2.630372', '53.549881,-2.774277', '52.192364,-2.223353', '52.689487,-2.030094', '52.584435,-1.980755', '52.616699,-2.005008', '52.599808,-2.082164', '52.584839,-2.055747', '52.584625,-2.129985', '54.282104,-0.402019', '54.082485,-0.192126', '53.957764,-1.083158', '54.485954,-0.615219', '53.954952,-1.126622', '53.783916,-1.071820']
for bit in latlonglist:
    slashbit = bit.split(",")[0]+"/"+bit.split(",")[1]
    xmlurl = 'http://www.chequecentre.co.uk/stores/getStores/'+slashbit+'/200'
    print 'scraping', xmlurl
    #xmldata = requests.get(xmlurl)
    #xmldata = urllib2.urlopen(xmlurl).read()
    #root = lxml.etree.fromstring(xmldata)
    root = lxml.etree.parse(xmlurl).getroot()
    lines = root.findall('.//marker')
    print lines
    for blob in lines:
        print blob.attrib
        city = blob.attrib['city']
        name = blob.attrib['name']
        postcode = blob.attrib['zip']
        phone = blob.attrib['phone']
        address = blob.attrib['address']
        lat = blob.attrib['lat']
        lng = blob.attrib['lng']
        idno = blob.attrib['id']
        record['city'] = city
        record['name'] = name
        record['postcode'] = postcode
        record['phone'] = phone
        record['address'] = address
        record['lat'] = lat
        record['lng'] = lng
        record['idno'] = idno
        print record
    scraperwiki.sql.save(['idno'],record)
    



